# CPU-Only Configuration
# For systems without GPU or with very limited resources
# Uses the smallest possible model

model:
  name: "distilgpt2"  # Tiny 82M parameter model
  use_flash_attention: false
  trust_remote_code: true
  load_in_8bit: false
  load_in_4bit: false  # No quantization on CPU

lora:
  enabled: true
  r: 4  # Very small rank
  lora_alpha: 8
  lora_dropout: 0.05
  target_modules:
    - c_attn  # GPT-2 style attention
  bias: "none"
  task_type: "CAUSAL_LM"

dataset:
  name: "custom"
  train_file: "data/train.jsonl"
  eval_file: "data/eval.jsonl"
  max_length: 256  # Very short sequences
  prompt_template: "alpaca"

training:
  output_dir: "./outputs/cpu"
  num_train_epochs: 1
  per_device_train_batch_size: 1
  per_device_eval_batch_size: 1
  gradient_accumulation_steps: 4
  learning_rate: 5.0e-4
  lr_scheduler_type: "linear"
  warmup_ratio: 0.1
  weight_decay: 0.01
  max_grad_norm: 1.0
  
  optim: "adamw_torch"  # Standard optimizer
  fp16: false
  bf16: false
  
  logging_steps: 10
  save_steps: 200
  eval_steps: 200
  save_total_limit: 1
  evaluation_strategy: "no"
  
  group_by_length: false
  report_to: []
  seed: 42

inference:
  max_new_tokens: 64
  temperature: 0.8
  top_p: 0.9
  top_k: 40
  repetition_penalty: 1.2
  do_sample: true

